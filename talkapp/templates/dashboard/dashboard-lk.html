{% extends 'base.html' %}{% load static %}
{% block title %}
		<title>Главная</title>
{% endblock %}
{% block cssfiles %}
        <link href="https://vjs.zencdn.net/7.8.3/video-js.css" rel="stylesheet" />
        <link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css'>
        <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css"/>
        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/overcast/jquery-ui.css" />
        <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet" />
        <link rel="stylesheet" href={% static "css/open-iconic-bootstrap.min.css" %}>
        <link rel="stylesheet" href={% static "css/animate.css" %}>
	    <link rel="stylesheet" href={% static "css/owl.carousel.min.css" %}>
	    <link rel="stylesheet" href={% static "css/owl.theme.default.min.css" %}>
	    <link rel="stylesheet" href={% static "css/magnific-popup.css" %}>
        <link rel="stylesheet" href={% static "css/calendar.css" %}>
	    <link rel="stylesheet" href={% static "css/aos.css" %}>
	    <link rel="stylesheet" href={% static "css/style.css" %}>
		<link rel="stylesheet" href={% static "css/simple-sidebar.css" %}>
        <link rel="stylesheet" href={% static "css/main.css" %}>
        <link rel="stylesheet" href={% static "css/dashboard.css" %}>

{% endblock %}
    {% block content %}
    {% include "dashboard/dashboard-header.html" %}
    <div class="d-flex right-toggled" id="wrapper"> <!-- right-toggleed -->

        <div id="left-sidebar-wrapper">
      <div class="list-group mx-auto" id="list-tab" role="tablist">
        <a class="list-group-item list-group-item-action active" id="dd0" data-toggle="list" role="tab"><p style="margin-bottom: 0">Главная</p></a>
          <a class="list-group-item list-group-item-action" id="dd1" data-toggle="list" href="../dashboard/platform" role="tab"><p style="margin-bottom: 0">Класс</p></a>
          <a class="list-group-item list-group-item-action" id="dd5" data-toggle="list" href="../dashboard/homework" role="tab"><p style="margin-bottom: 0">Задания</p></a>
        <a class="list-group-item list-group-item-action" id="dd3" data-toggle="list" href="../dashboard/schedule" role="tab"><p style="margin-bottom: 0">Расписание</p></a>
          <a class="list-group-item list-group-item-action" id="dd8" data-toggle="list" href="../dashboard/tape" role="tab"><p style="margin-bottom: 0">Словарь</p></a>
      </div>
    <div class="subscribe-block mx-auto">
        <h1>Будьте в курсе</h1>
        <p>Получайте информацию о сервисе и специальных предложениях</p>
        <button class="dashboard-button-primary">Подписаться</button>
    </div>
    </div>

    <!-- Page Content -->
    <div  id="page-content-wrapper">
        <div role="tabpanel">
            <div class="row" style="height:160px">
                <div class="col-md-12" style="max-width: 400px; padding-right: 5px">
                    <div class="card mb-3" style=" border-radius: 6px;height: 90%">
                        <div class="row g-0" style="height:100%">
                            <div class="col-md-4" style="padding-left:15px; padding-right:0">
                                <img id="teacher-img" src='{% static "images/avatar.png" %}' style="width: auto; height: auto; max-width: 100px;max-height: 100px;  border-radius: 100%; margin-left: 16px; margin-top: 20px; margin-bottom: 16px; margin-right: 8px;"  align="center">
                            </div>
                            <div class="col-md-7" id="teacher-blog" style="padding-left:0; padding-right:0; margin-right: 10px">
                                <div class="teacher-name">
                                    <p style="margin-bottom:3px">Анна Иванова</p>
                                </div>
                                <p class="card-text teacher-info">Преподаватель, менеджер меропр..</p>
                                <button class="dashboard-button-secondary-teacher" >Онлайн класс</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col" style="max-width: 220px; padding-left: 5px; padding-right: 5px;" >
                    <div class="balance-blck" style="height: 90%">
                        <div class="balance-text">Баланс: {{paid_lessons}} занятий</div>
                        <div class="balance-time">Занятия по {{lsn_time}} мин</div>
                        <div class="balance-time"><a href="../price" style="color:#2F80ED; margin-bottom: 10px">Пополнить »</a></div>
                    </div>
                </div>


                <div class="col" style="max-width: 290px; padding-left: 5px" >
                    <div class="balance-blck" style="height: 90%">
                        <div class="number-number"> <i style="color: #2F80ED" class="fa fa-phone"></i> +7 995 793 02 03</div>
                        <div class="number-number" style="color: #828282; font-weight: normal; margin-top: 0; margin-bottom: 8px">Перейти в Telegram</div>
                        <button style="margin: 0px 16px 19px 16px" class="dashboard-button-secondary-teacher" ><i style="margin-right: 3px;" class="fa fa-paper-plane"></i> Связаться с куратором</button>
                    </div>
                </div>

            </div>


            <!-- <div class="card mb-3">
            <section class="ftco-services ftco-no-pb">
                <div class="container-wrap">
                    <div class="row no-gutters">
                        <div class="card bg-white text-center" style="width: 100%; border: 0" >
                            <div class="card-header header-text" style="background: transparent">
                                <div class="row">
                                    <div class="col-8">
                                        <p>Ваше следующее занятие</p>
                                    </div>
                                    <div class="col-4" style="text-align: right">
                                        <button class="teacher-button dashboard-button-secondary" style="width: 38%">Курсы</button>
                                    </div>

                                </div>
                            </div>
                              <div class="card-body" style="padding: 0">
                                  <div class="row">
                                      <div class="col-5" style="border-right: 0.3px solid #BDBDBD; padding-left: 30px;display: grid;">
                                          <div class="header-text">
                                              <p>Бизнес английский</p>
                                          </div>
                                          <div class="teacher-name">
                                              <p>Анна Иванова</p>
                                          </div>
                                          <div class="teacher-info">
                                              <p>Преподаватель, менеджер предприятий</p>
                                          </div>
                                          <div class="teacher-buttons">
                                              <div class="row">
                                                <div class="col-8" style="padding: 10px;">
                                                    <button class="teacher-button dashboard-button-secondary">Подключиться к занятию</button>
                                                </div>
                                                <div class="col-4" style="padding: 10px; padding-left: 0;">
                                                    <button class="teacher-button dashboard-button-primary">В чат</button>
                                                </div>
                                              </div>
                                          </div>
                                      </div>
                                      <div class="col-7" style="padding:0">
                                          <div class="last-homework">
                                              <p style="margin-bottom: 0">Последнее домашнее задание</p>
                                              <p class="date-homework" style="margin-bottom: 0">12 марта 2021</p>
                                              <p class="text-homework" >Lorem ipsum dolor sit amet, consectetur adipiscing elit. A eget ut adipiscing amet, ut dignissim.
                                                  Arcu fames erat cursus pellentesque eu, morbi eget neque eget.
                                                  Nisl integer magna non vitae sollicitudin eget.
                                                  Nunc, montes, eget eget urna cum.
                                                  Egestas aliquam cursus amet sed.</p>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                            </div>
                        </div>
                        </div>
                        </section>
            </div> -->
            {% if lsn != 0 %}
            <div style="border-radius: 0px; border: none" class="card mb-3 text-center">
                <div id='calendar'></div>
            </div>
            {% else %}

            <div class="empty-lesson">
                <div>
                    <p class="empty-lesson-text">Пока вы не записались на уроки <img src='{% static "images/sad.png" %}'></p>
                    <a class="empty-lesson-text-small"> изменить расписание » </a>
                </div>
            </div>
            {% endif %}


            <div class="blogs">
                <div class="blogs-header">
                    <div class="blogs-header-text">
                        Статьи
                    </div>
                    <div class="blogs-header-show" >
                        <a data-bs-toggle="collapse" href="#collapseblogs" role="button" aria-expanded="false" aria-controls="collapseblogs" >Показать все</a>
                    </div>
                </div>
                <div class="blogs-content">
                    <div class="card-deck py-4" style="display: flex;">
                        {% for b in blog %}
                        {% if forloop.counter < 5 %}
                        <a href="../dashboard/blog/{{b.id}}">
                            <div class="card" style="margin-right: 14px; margin-left: 14px; margin-bottom: 14px">
                                <img class="card-img-top mx-auto" style="border-radius: 1rem;max-height: 280px;max-width: 380px;text-align: center; width: 280px; height: 380px; background-size: cover; background-repeat: no-repeat;position: relative; background-position: center center;background-image: url({{b.title_picture.url}})">
                                <div class="card-body blog-card">
                                    <h5 class="card-title" style="margin-left: 0.75rem;">{{b.title}}</h5>
                                </div>
                            </div>
                        </a>
                        {% else %}
                        <div class="collapse" id="collapseblogs">
                            <a href="../dashboard/blog/{{b.id}}">
                                <div class="card">
                                    <img class="card-img-top mx-auto" style="border-radius: 1rem; max-height: 280px;max-width: 380px;text-align: center; width: 280px; height: 380px; background-size: cover; background-repeat: no-repeat;position: relative; background-position: center center;background-image: url({{b.title_picture.url}})">
                                    <div class="card-body blog-card">
                                        <h5 class="card-title" style="margin-left: 0.75rem;">{{b.title}}</h5>
                                    </div>
                                </div>
                            </a>
                        </div>
                        {% endif %}
                        {% endfor %}

                    </div>
                </div>
            </div>
        </div>
</div>
    <!-- /#page-content-wrapper -->
{% endblock %}
{% block jsfiles %}
    <script src={% static "js/jquery.min.js" %}></script>
	  <script src={% static "js/jquery-migrate-3.0.1.min.js" %}></script>
	  <script src={% static "js/jquery.waypoints.min.js" %}></script>
	  <script src={% static "js/jquery.stellar.min.js" %}></script>
	  <script src={% static "js/owl.carousel.min.js" %}></script>
	  <script src={% static "js/jquery.magnific-popup.min.js" %}></script>
	  <script src={% static "js/aos.js" %}></script>
	  <script src={% static "js/scrollax.min.js" %}></script>
	  <script src={% static "js/main.js" %}></script>
      <script src={% static "js/shedule.js" %}></script>
      <script src="https://unpkg.com/popper.js/dist/umd/popper.min.js"></script>
      <script src="https://unpkg.com/tooltip.js/dist/umd/tooltip.min.js"></script>
      <script src="https://code.jquery.com/ui/1.11.3/jquery-ui.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/locale/ru.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
        <script>
            {% if is_teacher %}
            var is_teacher = true;
            {% else %}
            var is_teacher = false;
            {% endif %}

        </script>

        <script src={% static "js/dashboard.js" %}></script>
        <script src={% static "js/calendar.js" %}></script>
        <script src={% static "js/ru-calendar.js" %}></script>
        <script>

          document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {
              initialView: 'dayGridWeek',
              displayEventEnd: true,
              headerToolbar: false,
              locale: 'ru',
              navLinks: false,
              businessHours: false,
              editable: false,
              selectable: false,

              dayHeaderContent: (args) => {
                return moment(args.date).format('D MMMM yyyy[\n]dddd')
              },

              eventTimeFormat: {
                  hour: '2-digit',
                  minute: '2-digit',
                  meridiem: false
              },


//год, месяц, число. пендосы блин 2021-04-12T10:30:00
              events: [
                    {% for day in calendar %}
                        {% for d in day %}
                        {
                          id: '{{d.id}}',
                          start: '{{day.0.date|date:"Y-m-d"}}',
                          end: '{{day.0.date|date:"Y-m-d"}}',
                          title: '{{d.user_course.course_type}}',
                          description: '{{d.date|date:'H'}}:{{d.date|date:'i'}} - {{d.date_end|date:'H'}}:{{d.date_end|date:'i'}}',
                          displayEventEnd: true
                        },
                        {% endfor %}
                    {% endfor %}
                    ]
            });
            calendar.setOption('locale', 'ru');
            calendar.setOption('height', 320);
            calendar.render();

             $( document ).ready(function() {
             $( ".fc-event-title" ).each(function( index ) {
                  $(this).append('</br>' + "<a class='fs-text-calendar' >"+calendar.getEventById(index+1).extendedProps.description+"</a>");
             });
              });
          });

        </script>
{% endblock %}